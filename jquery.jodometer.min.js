/*
* jOdometer (1.1) // 2011.10.05 // <http://www.frontendmatters.com/projects/jquery-plugins/>
* 
* REQUIRES jQuery 1.2.3+ <http://jquery.com/>
* 
* Copyright (c) 2008 TrafficBroker <http://www.trafficbroker.co.uk>
* Licensed under GPL and MIT licenses
* 
* @author Jesus Carrera <jesus.carrera@frontendmatters.com>
*/
(function(a){a.fn.jOdometer=function(b){b=a.extend({},a.fn.jOdometer.defaults,b);return this.each(function(){var r=a(this);var d=-b.heightNumber;var c=parseFloat(b.counterStart);var p=[];var t=[];var f=String(b.counterStart).split(".");var h=0;var g=0;if(f[1]){var k=0;for(var l=f[1].length-1;l>-1;l--){t[l]=f[1].charAt(l);a(this).append('<img style="position:absolute; right:'+(k*b.widthNumber+b.offsetRight+k*b.spaceNumbers)+"px; top:"+((parseInt(t[l])*b.heightNumber*-1)+d)+'px;" class="jodometer_decimal_'+l+'" src="'+b.numbersImage+'" alt="Decimal '+(l+1)+'" />');k++}a(this).append('<div style="position:absolute; width:'+b.widthDot+"px; height:"+b.heightNumber+"px; background:url("+b.numbersImage+") no-repeat center "+((12*(b.heightNumber)*-1)+d)+"px; right:"+(f[1].length*b.widthNumber+b.offsetRight+f[1].length*b.spaceNumbers)+'px;" class="jodometer_dot"></div>');h=f[1].length;g=b.widthDot}var e=f[0];var k=e.length-1;var o=0;for(var l=0;l<e.length;l++){p[l]=e.charAt(k);if(b.formatNumber&&l>0&&l%3==0){a(this).append('<div style="position:absolute; width:'+b.widthDot+"px; height:"+b.heightNumber+"px; background:url("+b.numbersImage+") no-repeat center bottom; right:"+(l*b.widthNumber+h*b.widthNumber+g+o+b.offsetRight+h*b.spaceNumbers+l*b.spaceNumbers+b.spaceNumbers)+'px;" class="jodometer_dot"></div>');o+=b.widthDot+b.spaceNumbers}a(this).append('<img style="position:absolute; right:'+(l*b.widthNumber+h*b.widthNumber+g+o+b.offsetRight+h*b.spaceNumbers+l*b.spaceNumbers+b.spaceNumbers)+"px; top:"+((parseInt(p[l])*b.heightNumber*-1)+d)+'px;" class="jodometer_integer_'+l+'" src="'+b.numbersImage+'" alt="Integer '+(l+1)+'" />');k--}if(parseFloat(b.counterStart)!=b.counterEnd||(b.counterEnd.toString()=="false"&&parseFloat(b.counterStart)==0)){var s=setInterval(q,b.delayTime)}function q(){n(c);c=c+b.increment;if(b.counterEnd!=false&&c>=b.counterEnd){clearInterval(s);n(b.counterEnd)}}function n(i){f=String(i).split(".");if(t.length>0){for(l=0;l<t.length;l++){oldDigit=t[l];if(f[1]){t[l]=f[1].charAt(l)}if(t[l]==""){t[l]="0"}m(a(".jodometer_decimal_"+l,r),parseInt(t[l]),parseInt(oldDigit))}}e=f[0];k=e.length-1;for(l=0;l<p.length;l++){oldDigit=p[l];p[l]=e.charAt(k);if(p[l]==""){p[l]="0"}m(a(".jodometer_integer_"+l,r),parseInt(p[l]),parseInt(oldDigit));k--}}function m(j,i,u){if(i!=u){j.stop();if(i==0){j.animate({top:(10*b.heightNumber*-1)+d},b.speed,b.easing).animate({top:d},1,"linear")}else{if(i<u){j.animate({top:(10*b.heightNumber*-1)+d},b.speed*((10-u)/10),"linear").animate({top:d},1,"linear").animate({top:(i*b.heightNumber*-1)+d},b.speed*u/10,b.easing)}else{j.animate({top:(i*b.heightNumber*-1)+d},b.speed,b.easing)}}}}})};a.fn.jOdometer.defaults={counterStart:"0000.00",counterEnd:false,delayTime:1000,increment:0.01,speed:500,easing:"swing",numbersImage:"/images/jodometer-numbers.png",formatNumber:false,heightNumber:31,widthNumber:14,offsetRight:0,spaceNumbers:0,widthDot:10}})(jQuery);